---
layout: post
title: Spring core 실습 1
category: spring
---

## 비즈니스 요구사항과 설계
모든 정책이 아직 결정되지 않은 상황이라고 가정하여 인터페이스를 만들고 구현체를 언제든지 갈아끼울 수 있도록 설계한다.

- 회원
	- 회원을 가입하고 조회할 수 있다.
	- 회원은 일반과 VIP 두 가지 등급이 있다.
	- 회원 데이터는 자체 DB를 구축할 수 있고, 외부 시스템과 연동할 수 있다. (미확정)
- 주문과 할인 정책
	- 회원은 상품을 주문할 수 있다.
	- 회원 등급에 따라 할인 정책을 적용할 수 있다.
	- 할인 정책은 모든 VIP는 1000원을 할인해주는 고정 금액 할인을 적용해달라. (나중에 변경 될 수 있 다.)
	- 할인 정책은 변경 가능성이 높다. 회사의 기본 할인 정책을 아직 정하지 못했고, 오픈 직전까지 고민을 미루고 싶다. 최악의 경우 할인을 적용하지 않을 수 도 있다. (미확정)

<br>
## 회원 도메인 설계

- 회원 도메인 요구사항
	- 회원을 가입하고 조회할 수 있다.
	- 회원은 일반과 VIP 두 가지 등급이 있다.
	- 회원 데이터는 자체 DB를 구축할 수 있고, 외부 시스템과 연동할 수 있다. (미확정)

<br>
**회원 도메인 협력 관계**

![](https://user-images.githubusercontent.com/77649948/106249872-3de41780-6256-11eb-8683-609d029379b1.png)

<br>
**회원 클래스 다이어그램**

![](https://user-images.githubusercontent.com/77649948/106249881-40467180-6256-11eb-98a3-eb328ed4696a.png)

<br>
**회원 객체 다이어그램**

![](https://user-images.githubusercontent.com/77649948/106249885-41779e80-6256-11eb-89a0-d6bd8397e0bb.png)

회원 서비스: MemberServiceImpl

<br>
**회원 도메인 설계의 문제점**

의존관계가 인터페이스 뿐만 아니라 구현까지 모두 의존하는 문제점이 있음


<br>
## 주문과 할인 도메인 설계

- 주문과 할인 정책
	- 회원은 상품을 주문할 수 있다.
	- 회원 등급에 따라 할인 정책을 적용할 수 있다.
	- 할인 정책은 모든 VIP는 1000원을 할인해주는 고정 금액 할인을 적용해달라. (나중에 변경 될 수 있 다.)
	- 할인 정책은 변경 가능성이 높다. 회사의 기본 할인 정책을 아직 정하지 못했고, 오픈 직전까지 고민을 미루고 싶다. 최악의 경우 할인을 적용하지 않을 수 도 있다. (미확정)

<br>
**주문 도메인 협력, 역할, 책임**

![](https://user-images.githubusercontent.com/77649948/106249888-41779e80-6256-11eb-8ea8-9f66e5500b85.png)

- 주문 생성: 클라이언트는 주문 서비스에 주문 생성을 요청한다.
- 회원 조회: 할인을 위해서는 회원 등급이 필요하다. 그래서 주문 서비스는 회원 저장소에서 회원을 조회 한다.
- 할인 적용: 주문 서비스는 회원 등급에 따른 할인 여부를 할인 정책에 위임한다.
- 주문 결과 반환: 주문 서비스는 할인 결과를 포함한 주문 결과를 반환한다.

<br>
**주문 도메인 전체**

![](https://user-images.githubusercontent.com/77649948/106250562-26f1f500-6257-11eb-9419-f139d6e37169.png)

역할과 구현을 분리해서 자유롭게 구현 객체를 조립할 수 있게 설계한다.<br>
회원 저장소는 물론, 할인 정책도 유연하게 변경할 수 있다.

<br>
**주문 도메인 클래스 다이어그램**

![](https://user-images.githubusercontent.com/77649948/106250566-28232200-6257-11eb-989e-571a6ea0d10e.png)

<br>
**주문 도메인 객체 다이어그램 1**

![](https://user-images.githubusercontent.com/77649948/106250567-28bbb880-6257-11eb-8cdb-105164a15e0e.png)

<br>
**주문 도메인 객체 다이어그램 2**

![](https://user-images.githubusercontent.com/77649948/106250569-28bbb880-6257-11eb-9010-1f054f450a06.png)


<br>
<br>
<br>
----------------------------------------------------------------------------------------
<br>
[Git Repository](https://github.com/seunghan-dev/spring-core/)
<br>
참고: 김영한, [스프링 핵심 원리 - 기본편](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8/dashboard), Inflearn
